<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard - Orders</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="sidebar.css">
  <link rel="stylesheet" href="orders.css">
  <link rel="stylesheet" href="loading.css">
  <link rel="stylesheet" href="pagination.css">
  <link rel="stylesheet" href="navigation.css">
  <link rel="stylesheet" href="validation.css">
</head>
<body>

<!-- Sidebar Navigation - Loaded from sidebar.html -->
<div id="sidebar-container"></div>
<button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="Toggle menu">‚ò∞</button>

<header class="topbar">
  <div class="container">
    <h1>üõí Qu·∫£n l√Ω ƒë∆°n h√†ng</h1>
    <div class="session-actions">
      <div id="session-info" class="session-info"></div>
      <button id="btn-logout" class="btn-logout hidden" type="button">ƒêƒÉng xu·∫•t</button>
    </div>
  </div>
</header>

<main class="container">
  <section class="card" id="login-section">
    <h2>ƒêƒÉng nh·∫≠p qu·∫£n tr·ªã</h2>
    <div class="grid">
      <div>
        <label>API KEY</label>
        <input id="api_key" type="text" placeholder="API KEY">
      </div>
      <div>
        <label>Email owner</label>
        <input id="email" type="email" placeholder="owner@shop.com">
      </div>
      <div>
        <label>Password owner</label>
        <input id="password" type="password" placeholder="password">
      </div>
    </div>
    <button id="btn-login">ƒêƒÉng nh·∫≠p</button>
  </section>

  <section class="card">
    <div class="card-header">
      <h2>Danh s√°ch ƒë∆°n h√†ng</h2>
      <button id="btn-new" class="btn-secondary">+ T·∫°o ƒë∆°n h√†ng</button>
    </div>

    <div class="table-wrap">
      <table id="orders-table">
        <thead>
          <tr>
            <th>Customer</th>
            <th>S·∫£n ph·∫©m</th>
            <th class="text-center">T·ªïng ti·ªÅn</th>
            <th class="text-center">Status</th>
            <th>Created at</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr><td colspan="6" class="muted">ƒêƒÉng nh·∫≠p ƒë·ªÉ t·∫£i d·ªØ li·ªáu...</td></tr>
        </tbody>
      </table>
      <div id="orders-pagination"></div>
    </div>
  </section>
</main>

<div id="order-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modal-title">T·∫°o ƒë∆°n h√†ng</h3>
      <button id="btn-close" class="btn-close">√ó</button>
    </div>

    <div class="form-section">
      <h4>Th√¥ng tin kh√°ch h√†ng</h4>
      <div class="grid">
        <div>
          <label>Kh√°ch h√†ng *</label>
          <div style="position: relative;">
            <input id="field-customer" type="text" placeholder="G√µ t√™n/sƒët ƒë·ªÉ t√¨m ho·∫∑c t·∫°o m·ªõi" autocomplete="off">
            <div id="customer-autocomplete" class="autocomplete-dropdown" style="display: none;"></div>
          </div>
          <small style="color: #666; font-size: 12px;">G√µ t√™n ho·∫∑c s·ªë ƒëi·ªán tho·∫°i. N·∫øu kh√¥ng t√¨m th·∫•y s·∫Ω t·ª± ƒë·ªông t·∫°o m·ªõi.</small>
        </div>
        <div>
          <label>Ng√†y gi·ªù ƒë·∫∑t h√†ng</label>
          <input id="field-order-date" type="datetime-local">
        </div>
      </div>
    </div>

    <div class="form-section">
      <h4>S·∫£n ph·∫©m</h4>
      <div id="items-container"></div>
      <button id="btn-add-item" type="button" class="btn-small">+ Th√™m s·∫£n ph·∫©m</button>
    </div>

    <div class="form-section">
      <h4>Th√¥ng tin giao h√†ng</h4>
      <div>
        <label>ƒê·ªãa ch·ªâ giao h√†ng *</label>
        <textarea 
          id="field-shipping-address" 
          placeholder="Nh·∫≠p ƒë·ªãa ch·ªâ giao h√†ng"
          rows="3"
          required
        ></textarea>
      </div>
      <div class="grid">
        <div>
          <label>Th√†nh ph·ªë/T·ªânh</label>
          <input 
            id="field-shipping-city" 
            type="text" 
            placeholder="Nh·∫≠p th√†nh ph·ªë/t·ªânh"
          >
        </div>
        <div>
          <label>M√£ b∆∞u ƒëi·ªán</label>
          <input 
            id="field-shipping-zipcode" 
            type="text" 
            placeholder="Nh·∫≠p m√£ b∆∞u ƒëi·ªán (t√πy ch·ªçn)"
          >
        </div>
      </div>
      <div>
        <label>Ghi ch√∫ giao h√†ng</label>
        <textarea 
          id="field-shipping-note" 
          placeholder="V√≠ d·ª•: Giao h√†ng trong gi·ªù h√†nh ch√≠nh, g·ªçi tr∆∞·ªõc khi giao..."
          rows="2"
        ></textarea>
      </div>
    </div>

    <div class="form-section">
      <h4>Ghi ch√∫ ƒë∆°n h√†ng</h4>
      <div>
        <label>Ghi ch√∫</label>
        <textarea 
          id="field-order-note" 
          placeholder="Ghi ch√∫ th√™m cho ƒë∆°n h√†ng"
          rows="2"
        ></textarea>
      </div>
    </div>

    <div class="form-section">
      <div class="total-display">
        <strong>T·ªïng ti·ªÅn:</strong>
        <span id="order-total">0 ‚Ç´</span>
      </div>
    </div>

    <div class="modal-actions">
      <button id="btn-save" class="btn-primary">T·∫°o ƒë∆°n</button>
    </div>
  </div>
</div>

<div id="detail-modal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h3>Chi ti·∫øt ƒë∆°n h√†ng</h3>
      <button id="btn-close-detail" class="btn-close">√ó</button>
    </div>
    <div id="order-detail-content"></div>
  </div>
</div>

<script src="loading.js"></script>
<script src="auth.js"></script>
<script src="cache.js"></script>
<script src="common.js"></script>
<script src="worker-api.js"></script>
<script src="pagination.js"></script>
<script src="validation.js"></script>
<script>
  // Load sidebar HTML from sidebar.html
  (function() {
    fetch('sidebar.html')
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to load sidebar');
        }
        return response.text();
      })
      .then(html => {
        document.getElementById('sidebar-container').innerHTML = html;
        // Initialize sidebar after loading
        const script = document.createElement('script');
        script.src = 'sidebar.js';
        script.onload = function() {
          console.log('‚úÖ Sidebar loaded and initialized');
        };
        document.body.appendChild(script);
      })
      .catch(err => {
        console.error('‚ùå Error loading sidebar:', err);
        // Fallback: show error message
        document.getElementById('sidebar-container').innerHTML = 
          '<div style="padding: 20px; color: #ef4444;">Error loading sidebar</div>';
      });
  })();
</script>
<script src="orders.js"></script>
</body>
</html>
